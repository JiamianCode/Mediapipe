<!doctype html>
<html lang="zh">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>index</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/layout.css">
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Mediapipe Pose JS -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.1/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils@0.6/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.2/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.2/pose.js" crossorigin="anonymous"></script>

    <!-- 引入ONNX库 -->
    <script src="https://cdn.jsdelivr.net/npm/onnxjs/dist/onnx.min.js"></script>

    <!-- 引入 d3 文件 -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- 引入 ECharts 文件和ECharts GL库 -->
    <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.4.3/files/dist/echarts.min.js"></script>
    <script type="text/javascript" src="https://registry.npmmirror.com/echarts-gl/2/files/dist/echarts-gl.min.js"></script>
</head>
<body>
<div class="container-fluid mb-2">
    <div class="row g-2">
        <!-- 标题栏 -->
        <div class="col-md-12">
            <div class="border rounded navbar-custom">
                RescueLens: Providing Real Time Interactive and Visualization Solution for CPR Training Process
            </div>
        </div>

        <!--左部:控制面板+主画面-->
        <div class="col-md-7">
            <div class="row g-2">
                <!-- 控制面板 -->
                <div class="col-md-3">
                    <div class="card custom-card h-100">
                        <div class="card-header custom-header">
                            控制面板
                        </div>
                        <div class="card-body custom-card-body">
                            <div class="d-flex justify-content-center flex-wrap">
                                <!-- 源选择:无、摄像头、本地文件 -->
                                <div class="m-2">
                                    <div class="mb-3">
                                        <label for="imageSource" class="form-label">Image Source</label>
                                        <select id="imageSource" class="form-select">
                                            <option value="none">None</option>
                                            <option value="camera">Camera</option>
                                            <option value="file">Local File</option>
                                        </select>
                                    </div>
                                </div>
                                <!-- 源选择为本地文件时，文件选择 -->
                                <div class="m-2" id="fileInputContainer" style="display: none;">
                                    <div class="mb-3">
                                        <label for="file" class="form-label">Select File</label>
                                        <input class="form-control" type="file" id="file" accept="video/*">
                                        <div class="form-text" id="fileName">No file selected</div>
                                    </div>
                                </div>
                                <!-- 显示内容选择:源图、处理图（多选处理效果） -->
                                <div class="m-2" id="visualizationModeContainer" style="display: none;">
                                    <div class="mb-3">
                                        <label class="form-label">Visualization Mode</label>
                                        <div class="form-check">
                                            <input type="checkbox" id="originalImage" class="form-check-input" checked>
                                            <label class="form-check-label" for="originalImage">Original Image</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" id="skeleton" class="form-check-input">
                                            <label class="form-check-label" for="skeleton">Skeleton</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" id="hull" class="form-check-input">
                                            <label class="form-check-label" for="skeleton">Hull</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" id="function" class="form-check-input">
                                            <label class="form-check-label" for="skeleton">Function</label>
                                        </div>
                                    </div>
                                </div>
                                <!-- 图表多选 -->
                                <div class="m-2" id="chartSelectionContainer" style="display: none;">
                                    <div class="mb-3">
                                        <label class="form-label">Data Chart Options</label>
                                        <div class="form-check">
                                            <input type="checkbox" id="checkboxChart1" class="form-check-input">
                                            <label class="form-check-label" for="checkboxChart1">Chart 1</label>
                                        </div>
                                        <div class="form-check">
                                            <input type="checkbox" id="checkboxChart2" class="form-check-input">
                                            <label class="form-check-label" for="checkboxChart2">Chart 2</label>
                                        </div>
                                    </div>
                                </div>
                                <!-- 录制按钮 -->
                                <div class="m-2" id="RecordContainer" style="display: none;">
                                    <button id="startButton" class="btn btn-primary">Record</button>
                                    <button id="stopButton" class="btn btn-danger">Stop</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 显示画面 -->
                <div class="col-md-9">
                    <div class="row g-2">
                        <!-- 第一行主画面 -->
                        <div class="col-md-12">
                            <div class="card custom-card h-100">
                                <div class="card-header custom-header">
                                    输出画面
                                </div>
                                <div class="card-body custom-card-body">
                                    <div class="video-container" id="videoContainer" style="display: none;">
                                        <canvas id="outputCanvas"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 第二行文字提示区 -->
                        <div class="col-md-12">
                            <div class="card custom-card h-100">
                                <div class="card-header custom-header">
                                    文字提示区
                                </div>
                                <div class="card-body custom-card-body">
                                    <div>
                                        您做的CPR像一坨
                                    </div>
                                    <div>
                                        您做的CPR娜艾莎~
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 第三行成绩堆叠图 -->
                        <div class="col-md-12">
                            <div class="card custom-card h-100">
                                <div class="card-header custom-header">
                                    成绩堆叠图
                                </div>
                                <div class="card-body custom-card-body">
                                    <div id="containerChart6" class="chart-container">
                                        <svg width="400" height="200" id="chart6"></svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--右部:图表-->
        <div class="col-md-5">
            <div class="row g-2">
                <!-- 第一行:角度仪表 与 角度散点图 -->
                <div class="col-md-4">
                    <div class="card custom-card h-100">
                        <div class="card-header custom-header">
                            Angle1
                        </div>
                        <div class="card-body custom-card-body">
                            <div id="firstChartContainer">
                                <div id="containerChart2" class="chart-container">
                                    <svg width="400" height="200" id="chart2"></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card custom-card h-100">
                        <div class="card-header custom-header">
                            角度散点图
                        </div>
                        <div class="card-body custom-card-body">
                            <div id="containerChart7" class="chart-container">
                                <svg width="400" height="200" id="chart7"></svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 第二行:力模拟图/3D骨骼 与 按压示意图 -->
                <div class="col-md-4">
                    <div class="card custom-card h-100">
                        <div class="card-header custom-header">
                            力模拟图
                        </div>
                        <div class="card-body custom-card-body">
                            <div id="poseCanvasContainer">
                                <canvas id="poseCanvas"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card custom-card h-100">
                        <div class="card-header custom-header">
                            按压示意图
                        </div>
                        <div class="card-body custom-card-body">
                            <div id="chartContainer" style="display: none;">
                                <div id="containerChart1" class="chart-container">
                                    <svg width="400" height="200" id="chart1"></svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 第三行:频率 与 水平坐标系 -->
                <div class="col-md-4">
                    <div class="card custom-card h-100">
                        <div class="card-header custom-header">
                            频率
                        </div>
                        <div class="card-body custom-card-body">
                            <div id="containerChart5" class="chart-container">
                                <svg width="400" height="200" id="chart5"></svg>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card custom-card h-100">
                        <div class="card-header custom-header">
                            平行坐标系
                        </div>
                        <div class="card-body custom-card-body">
                            <div id="containerChart8" class="chart-container">
                                <svg width="400" height="200" id="chart8"></svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 原画面与骨骼 -->
<div class="col-md-4">
    <div class="row g-2">
        <!-- 第一行：原画面 -->
        <div class="col-md-12">
            <div class="card custom-card h-100">
                <div class="card-header custom-header">
                    输入画面
                </div>
                <div class="card-body custom-card-body">
                    <div id="inputVideoContainer">
                        <video id="inputVideo" autoplay muted playsinline></video>
                    </div>
                </div>
            </div>
        </div>
        <!-- 第二行：骨骼动画 -->
        <div class="col-md-12">
            <div class="card custom-card h-100">
                <div class="card-header custom-header">
                    3D 骨骼图
                </div>
                <div class="card-body custom-card-body">
                    <div id="skeletonContainer">
                        <div id="skeleton3D"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-md-4">
    <div class="card custom-card h-100">
        <div class="card-header custom-header">
            Angle2
        </div>
        <div class="card-body custom-card-body">
            <div id="containerChart3" class="chart-container">
                <svg width="400" height="200" id="chart3"></svg>
            </div>
        </div>
    </div>
</div>
<div class="col-md-4">
    <div class="card custom-card h-100">
        <div class="card-header custom-header">
            Angle3
        </div>
        <div class="card-body custom-card-body">
            <div id="containerChart4" class="chart-container">
                <svg width="400" height="200" id="chart4"></svg>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript" src="js/model.js"></script>
<script type="text/javascript" src="js/pose.js"></script>
<script type="text/javascript" src="js/inputImage.js"></script>
<script type="text/javascript" src="js/outputImage.js"></script>
<script type="text/javascript" src="js/landmarkTrack.js"></script>
<script type="text/javascript" src="js/landmarkAngle.js"></script>
<script type="text/javascript" src="js/collideForce.js"></script>
<script type="text/javascript" src="js/scoreboard.js"></script>
<script type="text/javascript" src="js/angleCount.js"></script>
<script type="text/javascript" src="js/parallel.js"></script>
<script type="text/javascript" src="js/skeleton.js"></script>
<script type="text/javascript" src="js/control.js"></script>
</body>
</html>
